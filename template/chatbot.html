<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Energy Saver Chatbot Widget</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    body { font-family: 'Poppins', sans-serif; margin: 0; }
    #chatWidgetBtn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #00ffcc;
      color: #000;
      border: none;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      font-size: 30px;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(0,255,204,0.6);
    }
    #chatWidget {
      position: fixed;
      bottom: 90px;
      right: 20px;
      width: 320px;
      height: 450px;
      background: linear-gradient(145deg,#1e1e2f,#27293d);
      border-radius: 20px;
      border: 2px solid #00ffcc;
      display: none;
      flex-direction: column;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0,255,200,0.3);
    }
    #chatHeader {
      background: #00ffcc;
      color: #000;
      text-align: center;
      font-weight: bold;
      padding: 10px;
    }
    #langSelect {
      width: 95%;
      margin: 5px auto;
      padding: 5px;
      background: #222;
      color: #fff;
      border: none;
      font-size: 14px;
      display: block;
      border-radius: 5px;
    }
    #chatBox {
      flex: 1;
      padding: 8px;
      overflow-y: auto;
    }
    .message {
      margin: 6px 0;
      padding: 8px 12px;
      border-radius: 12px;
      max-width: 75%;
      line-height: 1.4;
      word-wrap: break-word;
    }
    .user {
      background: #1e90ff;
      color: #fff;
      margin-left: auto;
      text-align: right;
    }
    .bot {
      background: #333;
      color: #00ffcc;
      margin-right: auto;
    }
    .typing {
      font-style: italic;
      color: #aaa;
      margin: 5px 0;
    }
    #chatInputContainer {
      display: flex;
      border-top: 1px solid #444;
    }
    #chatInput {
      flex: 1;
      padding: 10px;
      border: none;
      outline: none;
      font-size: 14px;
      background: #222;
      color: #fff;
    }
    #sendBtn {
      padding: 10px 12px;
      border: none;
      background: #00ffcc;
      color: #000;
      font-weight: bold;
      cursor: pointer;
    }
    #sendBtn:hover {
      background: #00cc99;
    }
  </style>
</head>

<body>

  <button id="chatWidgetBtn">ðŸ’¡</button>

  <div id="chatWidget">
    <div id="chatHeader">Energy Saver Bot</div>
    <select id="langSelect">
      <option value="en">English</option>
      <option value="ta">Tamil</option>
      <option value="hi">Hindi</option>
    </select>
    <div id="chatBox"></div>
    <div id="chatInputContainer">
      <input type="text" id="chatInput" placeholder="Ask me something..." />
      <button id="sendBtn">Send</button>
    </div>
  </div>

  <script>
    const chatBtn = document.getElementById('chatWidgetBtn');
    const chatWidget = document.getElementById('chatWidget');
    chatBtn.addEventListener('click', () => {
      chatWidget.style.display = chatWidget.style.display === 'flex' ? 'none' : 'flex';
      chatWidget.style.flexDirection = 'column';
    });

    const responses = [
      {
        keywords: ["save electricity in summer"],
        reply: {
          en: ["â˜€ï¸ Tips for summer electricity saving:", "âœ… Use fans instead of AC", "ðŸŒ¡ Keep AC temperature 24â€“26Â°C", "ðŸªŸ Close curtains", "ðŸ§º Use washing machines at night"],
          ta: ["â˜€ï¸ à®•à¯‹à®Ÿà¯ˆ à®®à®¾à®šà®¤à¯à®¤à®¿à®²à¯ à®®à®¿à®©à¯à®šà®¾à®°à®¤à¯à®¤à¯ˆ à®šà¯‡à®®à®¿à®ªà¯à®ªà®¤à®±à¯à®•à®¾à®© à®•à¯à®±à®¿à®ªà¯à®ªà¯à®•à®³à¯:", "âœ… ACà®•à¯à®•à¯à®ªà¯ à®ªà®¤à®¿à®²à®¾à®• à®µà®¿à®šà®¿à®±à®¿à®•à®³à¯ˆ à®ªà®¯à®©à¯à®ªà®Ÿà¯à®¤à¯à®¤à®µà¯à®®à¯", "ðŸŒ¡ AC à®µà¯†à®ªà¯à®ªà®¨à®¿à®²à¯ˆ 24â€“26Â°C à®µà¯ˆà®•à¯à®•à®µà¯à®®à¯", "ðŸªŸ Ù¾Ø±Ø¯à®°à¯ˆà®•à®³à¯ à®®à¯‚à®Ÿà®µà¯à®®à¯", "ðŸ§º à®‡à®°à®µà®¿à®²à¯ à®¤à¯à®µà¯ˆà®•à¯à®•à¯à®®à¯ à®‡à®¯à®¨à¯à®¤à®¿à®°à®™à¯à®•à®³à¯ˆ à®ªà®¯à®©à¯à®ªà®Ÿà¯à®¤à¯à®¤à®µà¯à®®à¯"],
          hi: ["â˜€ï¸ à¤—à¤°à¥à¤®à¥€ à¤®à¥‡à¤‚ à¤¬à¤¿à¤œà¤²à¥€ à¤¬à¤šà¤¾à¤¨à¥‡ à¤•à¥‡ à¤‰à¤ªà¤¾à¤¯:", "âœ… AC à¤•à¥€ à¤œà¤—à¤¹ à¤ªà¤‚à¤–à¥‡ à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤°à¥‡à¤‚", "ðŸŒ¡ AC à¤¤à¤¾à¤ªà¤®à¤¾à¤¨ 24â€“26Â°C à¤°à¤–à¥‡à¤‚", "ðŸªŸ à¤ªà¤°à¥à¤¦à¥‡ à¤¬à¤‚à¤¦ à¤•à¤°à¥‡à¤‚", "ðŸ§º à¤°à¤¾à¤¤ à¤®à¥‡à¤‚ à¤µà¥‰à¤¶à¤¿à¤‚à¤— à¤®à¤¶à¥€à¤¨ à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤°à¥‡à¤‚"]
        }
      },
      {
        keywords: ["how to pay eb bill", "pay electricity bill", "eb bill payment"],
        reply: {
          en: ["ðŸ’¡ You can check your EB Bill Status here:", "ðŸ”— https://www.tnpdcl.gov.in/BillStatus/billstatus.xhtml"],
          ta: ["ðŸ’¡ à®‰à®™à¯à®•à®³à¯ à®®à®¿à®©à¯à®šà®¾à®°à®•à¯ à®•à®£à®•à¯à®•à¯ˆ à®‡à®™à¯à®•à¯‡ à®ªà®¾à®°à¯à®•à¯à®•à®²à®¾à®®à¯:", "ðŸ”— https://www.tnpdcl.gov.in/BillStatus/billstatus.xhtml"],
          hi: ["ðŸ’¡ à¤†à¤ª à¤…à¤ªà¤¨à¤¾ à¤¬à¤¿à¤œà¤²à¥€ à¤¬à¤¿à¤² à¤¯à¤¹à¤¾à¤ à¤šà¥‡à¤• à¤•à¤° à¤¸à¤•à¤¤à¥‡ à¤¹à¥ˆà¤‚:", "ðŸ”— https://www.tnpdcl.gov.in/BillStatus/billstatus.xhtml"]
        }
      },
      {
        keywords: ["eb customer care number", "eb helpline", "electricity helpline"],
        reply: {
          en: ["ðŸ“ž EB Customer Care Number: 1800-425-1234"],
          ta: ["ðŸ“ž à®®à®¿à®©à¯ à®µà®¾à®Ÿà®¿à®•à¯à®•à¯ˆà®¯à®¾à®³à®°à¯ à®•à¯‡à®°à¯à®¨à®®à¯à®ªà®°à¯: 1800-425-1234"],
          hi: ["ðŸ“ž à¤¬à¤¿à¤œà¤²à¥€ à¤—à¥à¤°à¤¾à¤¹à¤• à¤¸à¥‡à¤µà¤¾ à¤¨à¤‚à¤¬à¤°: 1800-425-1234"]
        }
      },
      {
        keywords: ["eb complaint number", "eb grievance", "eb support number"],
        reply: {
          en: ["ðŸ“ž For complaints, call: 94443-12345"],
          ta: ["ðŸ“ž à®ªà¯à®•à®¾à®°à¯à®•à®³à¯ à®ªà®¤à®¿à®µà¯ à®Žà®£à¯: 94443-12345"],
          hi: ["ðŸ“ž à¤¶à¤¿à¤•à¤¾à¤¯à¤¤ à¤¹à¥‡à¤¤à¥ à¤¨à¤‚à¤¬à¤°: 94443-12345"]
        }
      },
      {
        keywords: ["eb technical support", "eb emergency number", "eb outage support"],
        reply: {
          en: ["âš¡ In case of outage or technical support, call: 94444-67890"],
          ta: ["âš¡ à®®à®¿à®©à¯ à®šà¯‡à®µà¯ˆ à®•à¯à®±à¯ˆà®ªà®¾à®Ÿà¯à®•à®³à¯ à®…à®²à¯à®²à®¤à¯ à®†à®ªà®¤à¯à®¤à¯à®•à®¾à®² à®‰à®¤à®µà®¿: 94444-67890"],
          hi: ["âš¡ à¤¤à¤•à¤¨à¥€à¤•à¥€ à¤¸à¤¹à¤¾à¤¯à¤¤à¤¾ à¤¯à¤¾ à¤†à¤ªà¤¾à¤¤à¤•à¤¾à¤²à¥€à¤¨ à¤¸à¥à¤¥à¤¿à¤¤à¤¿ à¤¹à¥‡à¤¤à¥: 94444-67890"]
        }
      },
      {
        keywords: ["save electricity in winter"],
        reply: {
          en: ["â„ï¸ Winter electricity saving tips:", "ðŸ› Use blankets instead of heaters", "â˜€ï¸ Use sunlight", "ðŸ”Œ Turn off unused electronics"],
          ta: ["â„ï¸ à®•à¯à®³à®¿à®°à¯à®•à®¾à®²à®¤à¯à®¤à®¿à®²à¯ à®®à®¿à®©à¯à®šà®¾à®° à®šà¯‡à®®à®¿à®ªà¯à®ªà¯:", "ðŸ› à®¹à¯€à®Ÿà¯à®Ÿà®°à¯ à®ªà®¤à®¿à®²à®¾à®• à®•à®®à¯à®ªà®³à®¿à®•à®³à¯ à®ªà®¯à®©à¯à®ªà®Ÿà¯à®¤à¯à®¤à®µà¯à®®à¯", "â˜€ï¸ à®šà¯‚à®°à®¿à®¯ à®’à®³à®¿à®¯à¯ˆ à®ªà®¯à®©à¯à®ªà®Ÿà¯à®¤à¯à®¤à®µà¯à®®à¯", "ðŸ”Œ à®ªà®¯à®©à¯à®ªà®Ÿà®¾à®¤ à®šà®¾à®¤à®©à®™à¯à®•à®³à¯ˆ à®…à®£à¯ˆà®•à¯à®•à®µà¯à®®à¯"],
          hi: ["â„ï¸ à¤¸à¤°à¥à¤¦à¥€ à¤®à¥‡à¤‚ à¤¬à¤¿à¤œà¤²à¥€ à¤¬à¤šà¤¾à¤¨à¥‡ à¤•à¥‡ à¤‰à¤ªà¤¾à¤¯:", "ðŸ› à¤¹à¥€à¤Ÿà¤° à¤•à¥€ à¤œà¤—à¤¹ à¤•à¤‚à¤¬à¤² à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤°à¥‡à¤‚", "â˜€ï¸ à¤¸à¥‚à¤°à¤œ à¤•à¥€ à¤°à¥‹à¤¶à¤¨à¥€ à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤°à¥‡à¤‚", "ðŸ”Œ à¤…à¤¨à¥à¤ªà¤¯à¥‹à¤—à¥€ à¤‰à¤ªà¤•à¤°à¤£ à¤¬à¤‚à¤¦ à¤•à¤°à¥‡à¤‚"]
        }
      },
      {
        keywords: ["save electricity", "electricity saving", "tips"],
        reply: {
          en: ["ðŸ’¡ General electricity saving tips:", "âœ… Switch off Fan, AC, Lights when not in use", "ðŸ’¡ Use LED bulbs", "ðŸ”Œ Unplug chargers", "âš¡ Use energy-efficient devices"],
          ta: ["ðŸ’¡ à®ªà¯Šà®¤à¯à®µà®¾à®© à®®à®¿à®©à¯à®šà®¾à®° à®šà¯‡à®®à®¿à®ªà¯à®ªà¯:", "âœ… à®µà®¿à®šà®¿à®±à®¿, AC, à®µà®¿à®³à®•à¯à®•à¯à®•à®³à¯ˆ à®…à®£à¯ˆà®•à¯à®•à®µà¯à®®à¯", "ðŸ’¡ LED à®µà®¿à®³à®•à¯à®•à¯à®•à®³à¯ à®ªà®¯à®©à¯à®ªà®Ÿà¯à®¤à¯à®¤à®µà¯à®®à¯", "ðŸ”Œ à®šà®¾à®°à¯à®œà®°à¯à®•à®³à¯ à®…à®•à®±à¯à®±à®µà¯à®®à¯", "âš¡ à®®à®¿à®©à¯à®šà®¾à®° à®šà¯‡à®®à®¿à®ªà¯à®ªà¯à®•à¯ à®•à®°à¯à®µà®¿à®•à®³à¯"],
          hi: ["ðŸ’¡ à¤¸à¤¾à¤®à¤¾à¤¨à¥à¤¯ à¤¬à¤¿à¤œà¤²à¥€ à¤¬à¤šà¤¾à¤¨à¥‡ à¤•à¥‡ à¤¸à¥à¤à¤¾à¤µ:", "âœ… à¤ªà¤‚à¤–à¤¾, AC, à¤²à¤¾à¤‡à¤Ÿ à¤¬à¤‚à¤¦ à¤•à¤°à¥‡à¤‚", "ðŸ’¡ LED à¤¬à¤²à¥à¤¬", "ðŸ”Œ à¤šà¤¾à¤°à¥à¤œà¤° à¤…à¤¨à¤ªà¥à¤²à¤— à¤•à¤°à¥‡à¤‚", "âš¡ à¤Šà¤°à¥à¤œà¤¾-à¤•à¥à¤¶à¤² à¤‰à¤ªà¤•à¤°à¤£"]
        }
      },
      {
        keywords: ["what fan to use", "best fan", "fan type"],
        reply: {
          en: ["ðŸŒ€ Use ceiling fans or energy-efficient BLDC fans", "âœ… They consume less electricity and cool better"],
          ta: ["ðŸŒ€ à®šà®¿à®²à¯à®²à®¿à®™à¯ à®µà®¿à®šà®¿à®±à®¿ à®…à®²à¯à®²à®¤à¯ BLDC à®µà®¿à®šà®¿à®±à®¿ à®ªà®¯à®©à¯à®ªà®Ÿà¯à®¤à¯à®¤à®µà¯à®®à¯", "âœ… à®‡à®¤à¯ à®•à¯à®±à¯ˆà®¨à¯à®¤ à®®à®¿à®©à¯à®šà®¾à®°à®®à¯ à®ªà®¯à®©à¯à®ªà®Ÿà¯à®•à®¿à®±à®¤à¯ à®®à®±à¯à®±à¯à®®à¯ à®šà®¿à®±à®¨à¯à®¤ à®•cooling à®¤à®°à¯à®•à®¿à®±à®¤à¯"],
          hi: ["ðŸŒ€ à¤¸à¥€à¤²à¤¿à¤‚à¤— à¤«à¥ˆà¤¨ à¤¯à¤¾ BLDC à¤«à¥ˆà¤¨ à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤°à¥‡à¤‚", "âœ… à¤¯à¤¹ à¤•à¤® à¤¬à¤¿à¤œà¤²à¥€ à¤–à¤ªà¤¤ à¤•à¤°à¤¤à¤¾ à¤¹à¥ˆ à¤”à¤° à¤¬à¥‡à¤¹à¤¤à¤° à¤ à¤‚à¤¡à¤• à¤¦à¥‡à¤¤à¤¾ à¤¹à¥ˆ"]
        }
      },
      {
        keywords: ["what light to use", "best light", "light type"],
        reply: {
          en: ["ðŸ’¡ Use LED bulbs instead of incandescent or CFL", "âœ… LEDs consume less power and last longer"],
          ta: ["ðŸ’¡ à®‡à®©à¯à®•à®¾à®©à¯à®Ÿà®¸à®©à¯à®Ÿà¯ à®…à®²à¯à®²à®¤à¯ CFL à®ªà®¤à®¿à®²à®¾à®• LED à®µà®¿à®³à®•à¯à®•à¯à®•à®³à¯ à®ªà®¯à®©à¯à®ªà®Ÿà¯à®¤à¯à®¤à®µà¯à®®à¯", "âœ… LED à®•à®®à¯à®ªà®¿à®•à®³à¯ à®•à¯à®±à¯ˆà®¨à¯à®¤ à®®à®¿à®©à¯à®šà®¾à®°à®®à¯ à®ªà®¯à®©à¯à®ªà®Ÿà¯à®¤à¯à®¤à¯à®•à®¿à®±à®¤à¯ à®®à®±à¯à®±à¯à®®à¯ à®¨à¯€à®£à¯à®Ÿ à®•à®¾à®²à®®à¯ à®¨à¯€à®Ÿà®¿à®•à¯à®•à¯à®®à¯"],
          hi: ["ðŸ’¡ à¤‡à¤¨à¤•à¥ˆà¤‚à¤¡à¥‡à¤¸à¥‡à¤‚à¤Ÿ à¤¯à¤¾ CFL à¤•à¥‡ à¤¬à¤œà¤¾à¤¯ LED à¤¬à¤²à¥à¤¬ à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤°à¥‡à¤‚", "âœ… LEDs à¤•à¤® à¤¬à¤¿à¤œà¤²à¥€ à¤–à¤ªà¤¤ à¤•à¤°à¤¤à¥‡ à¤¹à¥ˆà¤‚ à¤”à¤° à¤²à¤‚à¤¬à¥‡ à¤¸à¤®à¤¯ à¤¤à¤• à¤šà¤²à¤¤à¥‡ à¤¹à¥ˆà¤‚"]
        }
      },
      {
        keywords: ["tv electricity", "what tv to use", "tv energy saving"],
        reply: {
          en: ["ðŸ“º Use LED or Smart TVs with energy-saving mode", "âœ… Avoid leaving TV on standby for long periods"],
          ta: ["ðŸ“º à®Žà®°à¯à®œà®¿ à®šà¯‡à®®à®¿à®ªà¯à®ªà¯ à®®à¯à®±à¯ˆ à®•à¯Šà®£à¯à®Ÿ LED à®…à®²à¯à®²à®¤à¯ à®¸à¯à®®à®¾à®°à¯à®Ÿà¯ TV à®ªà®¯à®©à¯à®ªà®Ÿà¯à®¤à¯à®¤à®µà¯à®®à¯", "âœ… TV à®¸à¯à®Ÿà¯‡à®£à¯à®Ÿà¯à®ªà¯ˆ à®…à®©à®¾à®µà®šà®¿à®¯à®®à®¾à®• à®¨à¯€à®£à¯à®Ÿ à®¨à¯‡à®°à®®à¯ à®µà¯ˆà®•à¯à®•à®¾à®¤à¯€à®°à¯à®•à®³à¯"],
          hi: ["ðŸ“º à¤Šà¤°à¥à¤œà¤¾ à¤¬à¤šà¤¾à¤¨à¥‡ à¤µà¤¾à¤²à¥‡ à¤®à¥‹à¤¡ à¤•à¥‡ à¤¸à¤¾à¤¥ LED à¤¯à¤¾ à¤¸à¥à¤®à¤¾à¤°à¥à¤Ÿ TV à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤°à¥‡à¤‚", "âœ… TV à¤•à¥‹ à¤¸à¥à¤Ÿà¥ˆà¤‚à¤¡à¤¬à¤¾à¤¯ à¤®à¥‡à¤‚ à¤²à¤‚à¤¬à¥‡ à¤¸à¤®à¤¯ à¤¤à¤• à¤¨ à¤›à¥‹à¤¡à¤¼à¥‡à¤‚"]
        }
      },
      {
        keywords: ["hi", "hello", "hey"],
        reply: {
          en: ["ðŸ‘‹ Hey! How are you?"],
          ta: ["ðŸ‘‹ à®¹à®¾à®¯à¯! à®Žà®ªà¯à®ªà®Ÿà®¿ à®‡à®°à¯à®•à¯à®•à¯€à®°à¯à®•à®³à¯?"],
          hi: ["ðŸ‘‹ à¤¹à¤¾à¤¯! à¤†à¤ª à¤•à¥ˆà¤¸à¥‡ à¤¹à¥ˆà¤‚?"]
        }
      },
      {
        keywords: ["fine", "I am fine"],
        reply: {
          en: ["ðŸ˜Š That's good to hear!"]
        }
      },
      {
        keywords: ["how are you", "what about you"],
        reply: {
          en: ["ðŸ¤– I'm doing great! How about you?"],
          ta: ["ðŸ¤– à®¨à®¾à®©à¯ à®¨à®©à¯à®±à®¾à®• à®‡à®°à¯à®•à¯à®•à®¿à®±à¯‡à®©à¯! à®¨à¯€à®™à¯à®•à®³à¯ à®Žà®ªà¯à®ªà®Ÿà®¿ à®‡à®°à¯à®•à¯à®•à®¿à®±à¯€à®°à¯à®•à®³à¯?"],
          hi: ["ðŸ¤– à¤®à¥ˆà¤‚ à¤ à¥€à¤• à¤¹à¥‚à¤! à¤†à¤ª?"]
        }
      },
      {
        keywords: ["what is your name"],
        reply: {
          en: ["ðŸ’¡ I am Energy Saver Bot"],
          ta: ["ðŸ’¡ à®¨à®¾à®©à¯ à®Žà®°à¯à®œà®¿ à®šà¯‡à®µà®°à¯ à®ªà®¾à®Ÿà¯à®Ÿà®¾"],
          hi: ["ðŸ’¡ à¤®à¥ˆà¤‚ à¤à¤¨à¤°à¥à¤œà¥€ à¤¸à¥‡à¤µà¤° à¤¬à¥‰à¤Ÿ à¤¹à¥‚à¤"]
        }
      },
      {
        keywords: ["thanks", "thank you"],
        reply: {
          en: ["ðŸ˜Š You're welcome!"],
          ta: ["ðŸ˜Š à®¨à¯€à®™à¯à®•à®³à¯ à®µà®°à®µà¯‡à®±à¯à®•à®ªà¯à®ªà®Ÿà¯à®•à®¿à®±à¯€à®°à¯à®•à®³à¯!"],
          hi: ["ðŸ˜Š à¤†à¤ªà¤•à¤¾ à¤¸à¥à¤µà¤¾à¤—à¤¤ à¤¹à¥ˆ!"]
        }
      },
      {
        keywords: ["rooftop solar", "solar benefits", "solar subsidy", "solar contact", "solar installation"],
        reply: {
          en: [
            "ðŸŒž Benefits of Rooftop Solar Systems:",
            "âœ… Reduces electricity bills significantly",
            "âœ… Environment-friendly, reduces carbon footprint",
            "âœ… Energy independence and backup during power cuts",
            "ðŸ’¸ Subsidy: Up to 40% subsidy is provided by MNRE (Ministry of New and Renewable Energy)",
            "ðŸ“ž Contact TANGEDCO for installation assistance: 1800-425-1234",
            "ðŸ”— More details: https://mnre.gov.in/solar-rooftop"
          ],
          ta: [
            "ðŸŒž à®•à¯‚à®°à¯ˆ à®šà¯‹à®²à®¾à®°à¯ à®…à®®à¯ˆà®ªà¯à®ªà¯à®•à®³à®¿à®©à¯ à®¨à®©à¯à®®à¯ˆà®•à®³à¯:",
            "âœ… à®®à®¿à®©à¯à®šà®¾à®°à®•à¯ à®•à®Ÿà¯à®Ÿà®£à®¤à¯à®¤à¯ˆ à®•à¯à®±à¯ˆà®•à¯à®•à®¿à®±à®¤à¯",
            "âœ… à®šà¯à®±à¯à®±à¯à®šà¯à®šà¯‚à®´à®²à¯à®•à¯à®•à¯ à®¨à®²à¯à®²à®¤à¯, à®•à®¾à®°à¯à®ªà®©à¯ à®…à®Ÿà¯ˆà®¯à®¾à®³à®¤à¯à®¤à¯ˆ à®•à¯à®±à¯ˆà®•à¯à®•à®¿à®±à®¤à¯",
            "âœ… à®®à®¿à®©à¯à®µà®¿à®³à®•à¯à®•à®™à¯à®•à®³à¯ à®®à¯à®Ÿà®•à¯à®•à®ªà¯à®ªà®Ÿà¯à®Ÿà®¾à®²à¯à®®à¯ à®†à®±à¯à®±à®²à¯ à®šà¯à®¯à®¾à®¤à¯€à®©à®®à¯",
            "ðŸ’¸ à®®à®¾à®©à®¿à®¯à®®à¯: MNRE à®®à¯‚à®²à®®à¯ 40% à®µà®°à¯ˆ à®®à®¾à®©à®¿à®¯à®®à¯ à®µà®´à®™à¯à®•à®ªà¯à®ªà®Ÿà¯à®•à®¿à®±à®¤à¯",
            "ðŸ“ž à®¨à®¿à®±à¯à®µ à®‰à®¤à®µà®¿: TANGEDCO 1800-425-1234",
            "ðŸ”— à®®à¯‡à®²à¯à®®à¯ à®µà®¿à®µà®°à®™à¯à®•à®³à¯à®•à¯à®•à¯: https://mnre.gov.in/solar-rooftop"
          ],
          hi: [
            "ðŸŒž à¤°à¥‚à¤«à¤Ÿà¥‰à¤ª à¤¸à¥‹à¤²à¤° à¤¸à¤¿à¤¸à¥à¤Ÿà¤® à¤•à¥‡ à¤«à¤¾à¤¯à¤¦à¥‡:",
            "âœ… à¤¬à¤¿à¤œà¤²à¥€ à¤¬à¤¿à¤² à¤®à¥‡à¤‚ à¤®à¤¹à¤¤à¥à¤µà¤ªà¥‚à¤°à¥à¤£ à¤¬à¤šà¤¤",
            "âœ… à¤ªà¤°à¥à¤¯à¤¾à¤µà¤°à¤£ à¤•à¥‡ à¤…à¤¨à¥à¤•à¥‚à¤², à¤•à¤¾à¤°à¥à¤¬à¤¨ à¤«à¥à¤Ÿà¤ªà¥à¤°à¤¿à¤‚à¤Ÿ à¤•à¤® à¤•à¤°à¤¤à¤¾ à¤¹à¥ˆ",
            "âœ… à¤¬à¤¿à¤œà¤²à¥€ à¤•à¤Ÿà¥Œà¤¤à¥€ à¤•à¥‡ à¤¸à¤®à¤¯ à¤¬à¥ˆà¤•à¤…à¤ª à¤”à¤° à¤Šà¤°à¥à¤œà¤¾ à¤†à¤¤à¥à¤®à¤¨à¤¿à¤°à¥à¤­à¤°à¤¤à¤¾",
            "ðŸ’¸ à¤¸à¤¬à¥à¤¸à¤¿à¤¡à¥€: MNRE à¤¸à¥‡ 40% à¤¤à¤• à¤¸à¤¬à¥à¤¸à¤¿à¤¡à¥€",
            "ðŸ“ž à¤‡à¤‚à¤¸à¥à¤Ÿà¥‰à¤²à¥‡à¤¶à¤¨ à¤¸à¤¹à¤¾à¤¯à¤¤à¤¾ à¤•à¥‡ à¤²à¤¿à¤ à¤¸à¤‚à¤ªà¤°à¥à¤• à¤•à¤°à¥‡à¤‚: TANGEDCO 1800-425-1234",
            "ðŸ”— à¤…à¤§à¤¿à¤• à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€: https://mnre.gov.in/solar-rooftop"
          ]
        }
      }
    ];

    const chatBox = document.getElementById('chatBox');
    const chatInput = document.getElementById('chatInput');
    const sendBtn = document.getElementById('sendBtn');
    const langSelect = document.getElementById('langSelect');

    function levenshtein(a, b) {
      const dp = Array.from({ length: a.length + 1 }, () => Array(b.length + 1).fill(0));
      for (let i = 0; i <= a.length; i++) dp[i][0] = i;
      for (let j = 0; j <= b.length; j++) dp[0][j] = j;
      for (let i = 1; i <= a.length; i++) {
        for (let j = 1; j <= b.length; j++) {
          dp[i][j] = a[i - 1] === b[j - 1] ? dp[i - 1][j - 1] : Math.min(dp[i - 1][j - 1], dp[i - 1][j], dp[i][j - 1]) + 1;
        }
      }
      return dp[a.length][b.length];
    }

    function findBestMatch(text) {
      text = text.toLowerCase().trim();
      let best = null, minDist = Infinity;
      for (const item of responses) {
        for (const k of item.keywords) {
          const keyword = k.toLowerCase();
          if (text.includes(keyword) || keyword.includes(text)) return item;
          const dist = levenshtein(text, keyword);
          if (dist <= Math.min(keyword.length / 2, 3) && dist < minDist) {
            minDist = dist;
            best = item;
          }
        }
      }
      return best;
    }

    function appendMessage(sender, text) {
      const msg = document.createElement('div');
      msg.className = 'message ' + sender;
      msg.innerText = text;
      chatBox.appendChild(msg);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    function typeMessage(replyArr) {
      const typing = document.createElement('div');
      typing.className = 'typing';
      typing.innerText = 'Energy Bot is typing...';
      chatBox.appendChild(typing);
      chatBox.scrollTop = chatBox.scrollHeight;
      setTimeout(() => {
        chatBox.removeChild(typing);
        replyArr.forEach((line, i) =>
          setTimeout(() => appendMessage('bot', line), i * 1200)
        );
      }, 1000);
    }

    function sendMessage() {
      const text = chatInput.value.trim();
      if (!text) return;
      appendMessage('user', text);
      chatInput.value = '';
      const lang = langSelect.value;
      const matched = findBestMatch(text);
      if (matched) {
        typeMessage(matched.reply[lang] || matched.reply['en']);
      } else {
        const fallback = {
          en: "â“ I'm not sure about that. Try asking: 'How to save electricity?'",
          ta: "â“ à®¨à®¾à®©à¯ à®…à®¤à®¿à®²à¯ à®¨à®¿à®šà¯à®šà®¯à®®à¯ à®‡à®²à¯à®²à¯ˆ. à®•à¯‡à®³à¯à®™à¯à®•à®³à¯: 'à®®à®¿à®©à¯à®šà®¾à®°à®¤à¯à®¤à¯ˆ à®Žà®ªà¯à®ªà®Ÿà®¿ à®šà¯‡à®®à®¿à®ªà¯à®ªà®¤à¯?'",
          hi: "â“ à¤®à¥à¤à¥‡ à¤‡à¤¸à¤•à¤¾ à¤ªà¤¤à¤¾ à¤¨à¤¹à¥€à¤‚ à¤¹à¥ˆà¥¤ à¤ªà¥‚à¤›à¥‡à¤‚: 'à¤¬à¤¿à¤œà¤²à¥€ à¤•à¥ˆà¤¸à¥‡ à¤¬à¤šà¤¾à¤à¤‚?'"
        };
        appendMessage('bot', fallback[lang]);
      }
    }

    sendBtn.addEventListener('click', sendMessage);
    chatInput.addEventListener('keypress', e => {
      if (e.key === 'Enter') sendMessage();
    });

  </script>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TNEB Services </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,700&display=swap" rel="stylesheet" />
  <style>
    body {font-family: 'Roboto', sans-serif; margin:0; background: #f4f8fb;}
    header {background: #fff; border-bottom: 2px solid #e4e8ef; padding: 12px 0;}
    .logo { font-size: 32px; color:#2656a6; font-weight:700; letter-spacing:2px; }
    nav { margin:20px 0; text-align:center;}
    nav a { text-decoration:none; color:#2656a6; font-weight:bold; margin:0 20px; }
    .top-actions {display: flex; justify-content: space-between; align-items: center; padding: 0 30px;}
    .top-actions .contact {color: #2656a6; font-size:14px;}
    .main-banner {display:flex; justify-content:space-between; background:#fff; padding:25px 30px; border-radius:12px; margin:25px auto 0 auto; max-width:1100px; box-shadow: 0 2px 8px rgba(38,86,166,0.08);}
    .main-banner img {height:120px;}
    .main-banner .alert {font-size:25px; font-weight:bold; color: #e45b00; margin-bottom:8px;}
    .main-banner .note {font-size: 17px; color: #454545;}
    .services {display:flex; flex-wrap:wrap; justify-content:center; margin:40px 0;}
    .service-card {background:#fff; border-radius:12px; box-shadow:0 2px 8px rgba(38,86,166,0.10); margin:16px; padding:25px 24px; width:220px; text-align:center; transition: box-shadow 0.25s;}
    .service-card:hover {box-shadow:0 6px 20px rgba(38,86,166,0.16);}
    .service-card i {font-size:36px; color:#2656a6; margin-bottom:8px;}
    .service-card .title {font-weight:bold; font-size:18px; margin-bottom:8px;}
    .service-card .desc {font-size:16px; color:#666;}
    .user-login {background:#fff; border-radius:12px; margin:30px auto; max-width:400px; padding:30px 25px; box-shadow:0 2px 8px rgba(38,86,166,0.10);}
    .user-login h3 {font-size:20px; margin-bottom:8px;}
    .user-login label {display:block; margin-top:12px; font-weight:bold;}
    .user-login input {width:100%; padding:8px 12px; border-radius:6px; border:1px solid #c2d4fa; margin-top:2px;}
    .user-login .btn {margin-top:18px; width:100%; padding:11px 0; background:#2656a6; color:#fff; font-weight:bold; border:none; border-radius:8px; font-size:16px; cursor:pointer;}
    .user-login .links {margin-top:10px; font-size:13px;}
    .user-login .links a {color:#2656a6; text-decoration:none;}
    
    /* Modal styles */
    #billPredictorModal {
      display: none;
      position: fixed;
      top: 0; left: 0; width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.5);
      justify-content: center; align-items: center;
      z-index: 1000;
    }
    #billPredictorModal.active { display: flex; }
    #billPredictorContent {
      background: #fff;
      border-radius: 12px;
      padding: 30px;
      max-width: 400px;
      width: 90%;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      position: relative;
      text-align: center;
    }
    #billPredictorContent h3 {
      color: #0d6efd;
      margin-bottom: 20px;
    }
    #billPredictorContent input {
      width: 100%;
      padding: 10px;
      font-size: 16px;
      border-radius: 6px;
      border: 1px solid #ccc;
      margin-bottom: 15px;
    }
    #billPredictorContent button {
      width: 100%;
      padding: 12px;
      background: #0d6efd;
      border: none;
      color: #fff;
      font-weight: bold;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
    }
    #billPredictorContent button:hover {
      background: #0b5ed7;
    }
    #billPredictorContent #result {
      margin-top: 15px;
      font-weight: bold;
      min-height: 1.5em;
    }
    #closeModal {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 24px;
      font-weight: bold;
      cursor: pointer;
      border: none;
      background: none;
      color: #888;
    }
    #closeModal:hover {
      color: #000;
    }
    
    @media (max-width: 500px) {
      nav { font-size: 14px; }
      .service-card { width: 95%; }
      .user-login { width: 95%; }
    }

    header {
  background-color: #e9ebf0; /* TNEB blue */
  border-bottom: 2px solid #96cbe6;
  padding: 12px 30px;
  color: white;
}

nav {
  margin: 20px 0;
  text-align: center;
  background-color: #4571bd;
  padding: 10px 0;
}

nav a {
  text-decoration: none;
  color: white;       /* changed from #2656a6 to white */
  font-weight: bold;
  margin: 0 20px;
  font-size: 16px;    /* slightly reduced font size for nav links */
}

nav a:hover {
  text-decoration: underline;
}

  </style>
</head>
<body>

<header>
  <div class="top-actions">
    <div class="logo" style="display: flex; align-items: center; gap: 12px;">
  <img src="logo.jpg" alt="TNEB Logo" style="height: 48px;" />
  <span style="color: #2656a6; font-weight: 700; font-size: 32px; letter-spacing: 2px;">TNEB Services</span>
</div>

    <div>
<span style="display: inline-flex; align-items: center; gap: 8px; font-weight: 700; font-size: 20px; color: #2a7f62; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
  <img src="save.png" alt="Save Energy Icon" style="height: 40px; vertical-align: middle;" />
  Save Energy
</span>
    </div>
    <div class="contact">
      <img src="https://img.icons8.com/color/48/000000/phone.png" style="height:20px;vertical-align:middle;" alt="">
      1912 / 0471-2555544 (24x7 Helpline)
    </div>

    <!-- AI BILL Predictor Button -->
    <button id="openBillPredictor" style="background:#0d6efd; color:#fff; border:none; padding:8px 12px; margin-left:10px; cursor:pointer; border-radius:6px; font-weight:bold;">
      AI BILL Predictor
    </button>
  </div>
  <nav>
    <a href="home.html">HOME</a>
    <a href="quickpay.html">QUICK PAY</a>
    <a href="complaint.html">REGISTER COMPLAINT/SERVICE</a>
    <a href="#">COMPLAINT STATUS</a>
    <a href="new_connection.html">NEW CONNECTION</a>
    <a href="helpline.html">HELPLINE</a>

    <a href="userguide.html">USER GUIDE</a>
  </nav>
</header>

<main>
 <section class="main-banner" style="padding: 15px 30px; max-width: 600px; margin: auto;">
 <div style="
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 28px 32px;
  border-radius: 18px;
  box-shadow: 0 4px 18px rgba(38,86,166,0.08);
  background-image: url('ece.jpg');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  min-height: 116px;
  max-width: 820px;
  margin: 18px auto;
">
  <div>
    <div style="font-weight: bold; font-size: 22px; color: #e46a00; margin-bottom: 8px;">9496 01 01 01</div>
    <div style="font-weight: bold; font-size: 19px; line-height: 1.24; color: #e4c200;">
      Empower your future—save every unit! Turn off lights, fans,<br />
      and appliances when you leave a room.
    </div>
  </div>
  <img src="https://img.icons8.com/color/96/000000/electrical--v1.png" alt="Plug" style="height: 65px; margin-left: 18px;" />
</div>

</section>
<div style="
  position: absolute;
  top: 190px;
  left: 40px;
  width: 290px;
  background: linear-gradient(135deg, #e4f9dc 60%, #d8e6fe 100%);
  border-radius: 18px;
  box-shadow: 0 2px 12px rgba(48,133,76,0.08);
  padding: 18px 18px 14px 18px;
  z-index: 20;
  font-family: 'Roboto', sans-serif;
">
  <div style="font-weight: bold; font-size: 1.17em; text-align: center; margin-bottom: 12px;">
    What's New
  </div>
  <div style="max-height: 140px; overflow-y: auto;">
    <div style="display: flex; align-items: flex-start; gap: 8px; color: #e40000; margin-bottom: 10px;">
      <img src="https://img.icons8.com/color/20/megaphone.png" alt="">
      <span style="font-size: 0.98em;">
       Scheduled power outages will occur tomorrow in many districts including Chennai, Coimbatore, Vellore, and Karur due to maintenance work
      </span>
    </div>
    <div style="display: flex; align-items: flex-start; gap: 8px; margin-bottom: 10px;">
      <img src="https://img.icons8.com/color/20/megaphone.png" alt="">
      <span style="font-size: 0.98em;">
        The state power subsidy burden is projected to reach over ₹16,000 crore for the financial
      </span>
    </div>
    <div style="display: flex; align-items: flex-start; gap: 8px; margin-bottom: 10px;">
      <img src="https://img.icons8.com/color/20/megaphone.png" alt="">
      <span style="font-size: 0.98em;">
farmers are shielded from these hikes through subsidies amounting to ₹519.84 crore, ensuring minimal impact on household electricity      </span>
    </div>
  </div>
  <div style="text-align:center; margin-top:8px;">
    <button style="
      background:#365eff;
      color:#fff;
      border:none;
      border-radius:7px;
      padding:5px 18px;
      font-weight:600;
      cursor:pointer;
      box-shadow: 0 1px 8px #adb8c1;
      font-size: 0.97em;
    ">More</button>
  </div>
</div>


  <section class="services">
    <div style="display: flex; flex-wrap: wrap; gap: 32px; justify-content: center; margin: 42px 0;">
  <a href="quickpay.html" style="
    background: #edb6b6;
    border-radius: 18px;
    box-shadow: 0 2px 8px rgba(15, 83, 186, 0.06);
    padding: 32px 34px;
    width: 255px;
    text-align: center;
    text-decoration: none;
    color: #121111;
    transition: box-shadow 0.23s, background 0.23s;
    display: block;
  ">
    <div style="font-weight: bold; font-size: 1.17em; margin-bottom: 8px;">Quick Pay</div>
    <div style="font-size: 1.04em; color: #6a7a8a;">Pay current charge bills instantly in simple steps, anywhere.</div>
  </a>

  <a href="onlineservices.html" style="
    background: #99cde7;
    border-radius: 18px;
    box-shadow: 0 2px 8px rgba(10,30,60,0.06);
    padding: 32px 34px;
    width: 255px;
    text-align: center;
    text-decoration: none;
    color: #222;
    transition: box-shadow 0.23s, background 0.23s;
    display: block;
  ">
    <div style="font-weight: bold; font-size: 1.17em; margin-bottom: 8px;">Online Services</div>
    <div style="font-size: 1.04em; color: #6a7a8a;">Apply for Load change, Tariff change, Ownership change etc.</div>
  </a>

  <a href="complaint.html" style="
    background: #eff5bd;
    border-radius: 18px;
    box-shadow: 0 2px 8px rgba(10,30,60,0.06);
    padding: 32px 34px;
    width: 255px;
    text-align: center;
    text-decoration: none;
    color: #222;
    transition: box-shadow 0.23s, background 0.23s;
    display: block;
  ">
    <div style="font-weight: bold; font-size: 1.17em; margin-bottom: 8px;">Register Complaint/Service</div>
    <div style="font-size: 1.04em; color: #6a7a8a;">Reach out to us 24x7 for all service issues.</div>
  </a>

  <a href="registercontact.html" style="
    background: #c1f7d6;
    border-radius: 18px;
    box-shadow: 0 2px 8px rgba(10,30,60,0.06);
    padding: 32px 34px;
    width: 255px;
    text-align: center;
    text-decoration: none;
    color: #222;
    transition: box-shadow 0.23s, background 0.23s;
    display: block;
  ">
    <div style="font-weight: bold; font-size: 1.17em; margin-bottom: 8px;">Register Mobile/Email</div>
    <div style="font-size: 1.04em; color: #6a7a8a;">Receive alerts for new bills, supply interruptions, and quick payments.</div>
  </a>
</div>

  </section>

  <section class="user-login">
    <h3>User Login</h3>
    <form id="loginForm">
      <label for="userId">USER ID:</label>
      <input id="userId" type="text" placeholder="Enter your User ID" required>
      <label for="password">PASSWORD:</label>
      <input id="password" type="password" placeholder="Enter your Password" required>
      <button class="btn" type="submit">Sign In</button>
      <div class="links">
        <a href="#">New User Registration</a> | <a href="#">Trouble Logging in?</a>
      </div>
    </form>
  </section>
</main>

<!-- AI BILL Predictor Modal -->
<div id="billPredictorModal">
  <div id="billPredictorContent">
    <button id="closeModal" aria-label="Close modal">&times;</button>
    <h3>AI Electricity Bill Predictor</h3>
    <input id="unitsInput" type="number" placeholder="Enter meter units consumed" min="0" aria-label="Units input" />
    <button id="predictBtn">Predict Bill</button>
    <div id="result" aria-live="polite"></div>
  </div>
</div>

<script src="https://kit.fontawesome.com/19a825448d.js" crossorigin="anonymous"></script>

<script>
  // Modal controls
  const openBtn = document.getElementById('openBillPredictor');
  const modal = document.getElementById('billPredictorModal');
  const closeBtn = document.getElementById('closeModal');
  const predictBtn = document.getElementById('predictBtn');
  const inputUnits = document.getElementById('unitsInput');
  const resultDiv = document.getElementById('result');

  openBtn.addEventListener('click', () => {
    modal.classList.add('active');
    inputUnits.value = '';
    resultDiv.innerText = '';
    inputUnits.focus();
  });

  closeBtn.addEventListener('click', () => {
    modal.classList.remove('active');
  });

  window.addEventListener('click', (e) => {
    if (e.target === modal) {
      modal.classList.remove('active');
    }
  });

  predictBtn.addEventListener('click', async () => {
    const units = inputUnits.value.trim();
    if (!units || units < 0) {
      resultDiv.innerText = 'Please enter valid meter units.';
      return;
    }
    resultDiv.innerText = 'Calculating...';

    try {
      const response = await fetch('/predict-bill', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ units: Number(units) }),
      });

      const data = await response.json();

      if (response.ok) {
        resultDiv.innerText = `Predicted Bill: ₹${data.predicted_bill}`;
      } else {
        resultDiv.innerText = `Error: ${data.error}`;
      }
    } catch (error) {
      resultDiv.innerText = 'Error connecting to server.';
    }
  });

  document.getElementById('loginForm').addEventListener('submit', function (e) {
    e.preventDefault();
    alert('Login feature is for demo only!');
  });
</script>

<div style="
  display: flex;
  justify-content: center;
  align-items: flex-start;
  gap: 36px;
  flex-wrap: wrap;
">
  <!-- SAFETY POSTER SLIDESHOW (LEFT) -->
  <div style="flex: 1; min-width:300px; width:350px; height:225px; background: #fff; border-radius: 16px; box-shadow: 0 4px 24px rgba(0,0,0,0.08); padding: 18px 16px; margin-top: 34px; margin-bottom:34px; display: flex; flex-direction: column; align-items: center; justify-content: center;">
    <img id="safety-slide-img" 
         src="poster1.jpeg" 
         alt="Electricity Safety Poster" 
         style="width: 100%; height: 100%; object-fit: contain; border-radius: 12px; background: #fff;" 
    />
    <div style="text-align: center; margin-top: 10px; font-weight: 600; color: #ee7c23; font-size: 16px;">
      Electricity Safety Awareness
    </div>
  </div>

  <!-- SCHEME PROMO CARD (RIGHT) -->
  <div style="flex: 1; min-width:300px; width:350px; height:225px; background: #fff; border-radius: 16px; box-shadow: 0 4px 24px rgba(0,0,0,0.08); padding: 18px 16px; margin-top: 34px; margin-bottom:34px; display: flex; flex-direction: column; align-items: center; justify-content: center;">
    <img src="scheme.jpeg" 
         alt="Solar Panel Promotion"
         style="width: 100%; height: 100%; object-fit: contain; border-radius: 12px; background: #fff;" />
    <a href="solar-schemes.html"
       style="display: block; text-align: center; font-size: 18px; font-weight: bold; color: #238c43; text-decoration: none; transition: color 0.2s; margin-top: 10px;">
      🌞 Explore Government Solar Panel Schemes
    </a>
  </div>
</div>

<script>
const safetyPosters = [
  "poster1.jpeg",
  "poster2.jpeg",
  "poster3.jpeg"
];
let currentPoster = 0;
const imgElement = document.getElementById("safety-slide-img");
setInterval(() => {
  currentPoster = (currentPoster + 1) % safetyPosters.length;
  imgElement.src = safetyPosters[currentPoster];
}, 3000);
</script>






<!---chatBot----> 
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Energy Saver Chatbot Widget</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    body { font-family: 'Poppins', sans-serif; margin: 0; }
    #chatWidgetBtn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #00ffcc;
      color: #000;
      border: none;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      font-size: 30px;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(0,255,204,0.6);
    }
    #chatWidget {
      position: fixed;
      bottom: 90px;
      right: 20px;
      width: 320px;
      height: 450px;
      background: linear-gradient(145deg,#1e1e2f,#27293d);
      border-radius: 20px;
      border: 2px solid #00ffcc;
      display: none;
      flex-direction: column;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0,255,200,0.3);
    }
    #chatHeader {
      background: #00ffcc;
      color: #000;
      text-align: center;
      font-weight: bold;
      padding: 10px;
    }
    #langSelect {
      width: 95%;
      margin: 5px auto;
      padding: 5px;
      background: #222;
      color: #fff;
      border: none;
      font-size: 14px;
      display: block;
      border-radius: 5px;
    }
    #chatBox {
      flex: 1;
      padding: 8px;
      overflow-y: auto;
    }
    .message {
      margin: 6px 0;
      padding: 8px 12px;
      border-radius: 12px;
      max-width: 75%;
      line-height: 1.4;
      word-wrap: break-word;
    }
    .user {
      background: #1e90ff;
      color: #fff;
      margin-left: auto;
      text-align: right;
    }
    .bot {
      background: #333;
      color: #00ffcc;
      margin-right: auto;
    }
    .typing {
      font-style: italic;
      color: #aaa;
      margin: 5px 0;
    }
    #chatInputContainer {
      display: flex;
      border-top: 1px solid #444;
    }
    #chatInput {
      flex: 1;
      padding: 10px;
      border: none;
      outline: none;
      font-size: 14px;
      background: #222;
      color: #fff;
    }
    #sendBtn {
      padding: 10px 12px;
      border: none;
      background: #00ffcc;
      color: #000;
      font-weight: bold;
      cursor: pointer;
    }
    #sendBtn:hover {
      background: #00cc99;
    }
  </style>
</head>

<body>

  <button id="chatWidgetBtn">💡</button>

  <div id="chatWidget">
    <div id="chatHeader">Energy Saver Bot</div>
    <select id="langSelect">
      <option value="en">English</option>
      <option value="ta">Tamil</option>
      <option value="hi">Hindi</option>
    </select>
    <div id="chatBox"></div>
    <div id="chatInputContainer">
      <input type="text" id="chatInput" placeholder="Ask me something..." />
      <button id="sendBtn">Send</button>
    </div>
  </div>

  <script>
    const chatBtn = document.getElementById('chatWidgetBtn');
    const chatWidget = document.getElementById('chatWidget');
    chatBtn.addEventListener('click', () => {
      chatWidget.style.display = chatWidget.style.display === 'flex' ? 'none' : 'flex';
      chatWidget.style.flexDirection = 'column';
    });

    const responses = [
      {
        keywords: ["save electricity in summer","tips to save electricity"],
        reply: {
          en: ["☀️ Tips for summer electricity saving:", "✅ Use fans instead of AC", "🌡 Keep AC temperature 24–26°C", "🪟 Close curtains", "🧺 Use washing machines at night"],
          ta: ["☀️ கோடை மாசத்தில் மின்சாரத்தை சேமிப்பதற்கான குறிப்புகள்:", "✅ ACக்குப் பதிலாக விசிறிகளை பயன்படுத்தவும்", "🌡 AC வெப்பநிலை 24–26°C வைக்கவும்", "🪟 پردரைகள் மூடவும்", "🧺 இரவில் துவைக்கும் இயந்திரங்களை பயன்படுத்தவும்"],
          hi: ["☀️ गर्मी में बिजली बचाने के उपाय:", "✅ AC की जगह पंखे का उपयोग करें", "🌡 AC तापमान 24–26°C रखें", "🪟 पर्दे बंद करें", "🧺 रात में वॉशिंग मशीन का उपयोग करें"]
        }
      },
      {
        keywords: ["how to pay eb bill", "pay electricity bill", "eb bill payment"],
        reply: {
          en: ["💡 You can check your EB Bill Status here:", "🔗 https://www.tnpdcl.gov.in/BillStatus/billstatus.xhtml"],
          ta: ["💡 உங்கள் மின்சாரக் கணக்கை இங்கே பார்க்கலாம்:", "🔗 https://www.tnpdcl.gov.in/BillStatus/billstatus.xhtml"],
          hi: ["💡 आप अपना बिजली बिल यहाँ चेक कर सकते हैं:", "🔗 https://www.tnpdcl.gov.in/BillStatus/billstatus.xhtml"]
        }
      },
      {
        keywords: ["eb customer care number", "eb helpline", "electricity helpline"],
        reply: {
          en: ["📞 EB Customer Care Number: 1800-425-1234"],
          ta: ["📞 மின் வாடிக்கையாளர் கேர்நம்பர்: 1800-425-1234"],
          hi: ["📞 बिजली ग्राहक सेवा नंबर: 1800-425-1234"]
        }
      },
      {
        keywords: ["eb complaint number", "eb grievance", "eb support number"],
        reply: {
          en: ["📞 For complaints, call: 94443-12345"],
          ta: ["📞 புகார்கள் பதிவு எண்: 94443-12345"],
          hi: ["📞 शिकायत हेतु नंबर: 94443-12345"]
        }
      },
      {
        keywords: ["eb technical support", "eb emergency number", "eb outage support"],
        reply: {
          en: ["⚡ In case of outage or technical support, call: 94444-67890"],
          ta: ["⚡ மின் சேவை குறைபாடுகள் அல்லது ஆபத்துகால உதவி: 94444-67890"],
          hi: ["⚡ तकनीकी सहायता या आपातकालीन स्थिति हेतु: 94444-67890"]
        }
      },
      {
        keywords: ["save electricity in winter"],
        reply: {
          en: ["❄️ Winter electricity saving tips:", "🛏 Use blankets instead of heaters", "☀️ Use sunlight", "🔌 Turn off unused electronics"],
          ta: ["❄️ குளிர்காலத்தில் மின்சார சேமிப்பு:", "🛏 ஹீட்டர் பதிலாக கம்பளிகள் பயன்படுத்தவும்", "☀️ சூரிய ஒளியை பயன்படுத்தவும்", "🔌 பயன்படாத சாதனங்களை அணைக்கவும்"],
          hi: ["❄️ सर्दी में बिजली बचाने के उपाय:", "🛏 हीटर की जगह कंबल का उपयोग करें", "☀️ सूरज की रोशनी का उपयोग करें", "🔌 अनुपयोगी उपकरण बंद करें"]
        }
      },
      {
        keywords: ["save electricity", "electricity saving", "tips","how to save energy"],
        reply: {
          en: ["💡 General electricity saving tips:", "✅ Switch off Fan, AC, Lights when not in use", "💡 Use LED bulbs", "🔌 Unplug chargers", "⚡ Use energy-efficient devices"],
          ta: ["💡 பொதுவான மின்சார சேமிப்பு:", "✅ விசிறி, AC, விளக்குகளை அணைக்கவும்", "💡 LED விளக்குகள் பயன்படுத்தவும்", "🔌 சார்ஜர்கள் அகற்றவும்", "⚡ மின்சார சேமிப்புக் கருவிகள்"],
          hi: ["💡 सामान्य बिजली बचाने के सुझाव:", "✅ पंखा, AC, लाइट बंद करें", "💡 LED बल्ब", "🔌 चार्जर अनप्लग करें", "⚡ ऊर्जा-कुशल उपकरण"]
        }
      },
      {
        keywords: ["what fan to use", "best fan", "fan type"],
        reply: {
          en: ["🌀 Use ceiling fans or energy-efficient BLDC fans", "✅ They consume less electricity and cool better"],
          ta: ["🌀 சில்லிங் விசிறி அல்லது BLDC விசிறி பயன்படுத்தவும்", "✅ இது குறைந்த மின்சாரம் பயன்படுகிறது மற்றும் சிறந்த கcooling தருகிறது"],
          hi: ["🌀 सीलिंग फैन या BLDC फैन का उपयोग करें", "✅ यह कम बिजली खपत करता है और बेहतर ठंडक देता है"]
        }
      },
      {
        keywords: ["what light to use", "best light to use", "light type"],
        reply: {
          en: ["💡 Use LED bulbs instead of incandescent or CFL", "✅ LEDs consume less power and last longer"],
          ta: ["💡 இன்கான்டஸன்ட் அல்லது CFL பதிலாக LED விளக்குகள் பயன்படுத்தவும்", "✅ LED கம்பிகள் குறைந்த மின்சாரம் பயன்படுத்துகிறது மற்றும் நீண்ட காலம் நீடிக்கும்"],
          hi: ["💡 इनकैंडेसेंट या CFL के बजाय LED बल्ब का उपयोग करें", "✅ LEDs कम बिजली खपत करते हैं और लंबे समय तक चलते हैं"]
        }
      },
      {
        keywords: ["tv electricity", "what tv to use", "tv energy saving"],
        reply: {
          en: ["📺 Use LED or Smart TVs with energy-saving mode", "✅ Avoid leaving TV on standby for long periods"],
          ta: ["📺 எர்ஜி சேமிப்பு முறை கொண்ட LED அல்லது ஸ்மார்ட் TV பயன்படுத்தவும்", "✅ TV ஸ்டேண்ட்பை அனாவசியமாக நீண்ட நேரம் வைக்காதீர்கள்"],
          hi: ["📺 ऊर्जा बचाने वाले मोड के साथ LED या स्मार्ट TV का उपयोग करें", "✅ TV को स्टैंडबाय में लंबे समय तक न छोड़ें"]
        }
      },
      {
        keywords: ["hi", "hello", "hey"],
        reply: {
          en: ["👋 Hey! How are you?"],
          ta: ["👋 ஹாய்! எப்படி இருக்கீர்கள்?"],
          hi: ["👋 हाय! आप कैसे हैं?"]
        }
      },
      {
        keywords: ["fine", "I am fine"],
        reply: {
          en: ["😊 That's good to hear!"]
        }
      },
      {
        keywords: ["how are you", "what about you"],
        reply: {
          en: ["🤖 I'm doing great! How about you?"],
          ta: ["🤖 நான் நன்றாக இருக்கிறேன்! நீங்கள் எப்படி இருக்கிறீர்கள்?"],
          hi: ["🤖 मैं ठीक हूँ! आप?"]
        }
      },
      {
        keywords: ["what is your name"],
        reply: {
          en: ["💡 I am Energy Saver Bot"],
          ta: ["💡 நான் எர்ஜி சேவர் பாட்டா"],
          hi: ["💡 मैं एनर्जी सेवर बॉट हूँ"]
        }
      },
      {
        keywords: ["thanks", "thank you"],
        reply: {
          en: ["😊 You're welcome!"],
          ta: ["😊 நீங்கள் வரவேற்கப்படுகிறீர்கள்!"],
          hi: ["😊 आपका स्वागत है!"]
        }
      },
      {
        keywords: ["rooftop solar", "solar benefits", "solar subsidy", "solar contact", "solar installation"],
        reply: {
          en: [
            "🌞 Benefits of Rooftop Solar Systems:",
            "✅ Reduces electricity bills significantly",
            "✅ Environment-friendly, reduces carbon footprint",
            "✅ Energy independence and backup during power cuts",
            "💸 Subsidy: Up to 40% subsidy is provided by MNRE (Ministry of New and Renewable Energy)",
            "📞 Contact TANGEDCO for installation assistance: 1800-425-1234",
            "🔗 More details: https://mnre.gov.in/solar-rooftop"
          ],
          ta: [
            "🌞 கூரை சோலார் அமைப்புகளின் நன்மைகள்:",
            "✅ மின்சாரக் கட்டணத்தை குறைக்கிறது",
            "✅ சுற்றுச்சூழலுக்கு நல்லது, கார்பன் அடையாளத்தை குறைக்கிறது",
            "✅ மின்விளக்கங்கள் முடக்கப்பட்டாலும் ஆற்றல் சுயாதீனம்",
            "💸 மானியம்: MNRE மூலம் 40% வரை மானியம் வழங்கப்படுகிறது",
            "📞 நிறுவ உதவி: TANGEDCO 1800-425-1234",
            "🔗 மேலும் விவரங்களுக்கு: https://mnre.gov.in/solar-rooftop"
          ],
          hi: [
            "🌞 रूफटॉप सोलर सिस्टम के फायदे:",
            "✅ बिजली बिल में महत्वपूर्ण बचत",
            "✅ पर्यावरण के अनुकूल, कार्बन फुटप्रिंट कम करता है",
            "✅ बिजली कटौती के समय बैकअप और ऊर्जा आत्मनिर्भरता",
            "💸 सब्सिडी: MNRE से 40% तक सब्सिडी",
            "📞 इंस्टॉलेशन सहायता के लिए संपर्क करें: TANGEDCO 1800-425-1234",
            "🔗 अधिक जानकारी: https://mnre.gov.in/solar-rooftop"
          ]
        }
      }
    ];

    const chatBox = document.getElementById('chatBox');
    const chatInput = document.getElementById('chatInput');
    const sendBtn = document.getElementById('sendBtn');
    const langSelect = document.getElementById('langSelect');

    function levenshtein(a, b) {
      const dp = Array.from({ length: a.length + 1 }, () => Array(b.length + 1).fill(0));
      for (let i = 0; i <= a.length; i++) dp[i][0] = i;
      for (let j = 0; j <= b.length; j++) dp[0][j] = j;
      for (let i = 1; i <= a.length; i++) {
        for (let j = 1; j <= b.length; j++) {
          dp[i][j] = a[i - 1] === b[j - 1] ? dp[i - 1][j - 1] : Math.min(dp[i - 1][j - 1], dp[i - 1][j], dp[i][j - 1]) + 1;
        }
      }
      return dp[a.length][b.length];
    }

    function findBestMatch(text) {
      text = text.toLowerCase().trim();
      let best = null, minDist = Infinity;
      for (const item of responses) {
        for (const k of item.keywords) {
          const keyword = k.toLowerCase();
          if (text.includes(keyword) || keyword.includes(text)) return item;
          const dist = levenshtein(text, keyword);
          if (dist <= Math.min(keyword.length / 2, 3) && dist < minDist) {
            minDist = dist;
            best = item;
          }
        }
      }
      return best;
    }

    function appendMessage(sender, text) {
      const msg = document.createElement('div');
      msg.className = 'message ' + sender;
      msg.innerText = text;
      chatBox.appendChild(msg);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    function typeMessage(replyArr) {
      const typing = document.createElement('div');
      typing.className = 'typing';
      typing.innerText = 'Energy Bot is typing...';
      chatBox.appendChild(typing);
      chatBox.scrollTop = chatBox.scrollHeight;
      setTimeout(() => {
        chatBox.removeChild(typing);
        replyArr.forEach((line, i) =>
          setTimeout(() => appendMessage('bot', line), i * 1200)
        );
      }, 1000);
    }

    function sendMessage() {
      const text = chatInput.value.trim();
      if (!text) return;
      appendMessage('user', text);
      chatInput.value = '';
      const lang = langSelect.value;
      const matched = findBestMatch(text);
      if (matched) {
        typeMessage(matched.reply[lang] || matched.reply['en']);
      } else {
        const fallback = {
          en: "❓ I'm not sure about that. Try asking: 'How to save electricity?'",
          ta: "❓ நான் அதில் நிச்சயம் இல்லை. கேளுங்கள்: 'மின்சாரத்தை எப்படி சேமிப்பது?'",
          hi: "❓ मुझे इसका पता नहीं है। पूछें: 'बिजली कैसे बचाएं?'"
        };
        appendMessage('bot', fallback[lang]);
      }
    }

    sendBtn.addEventListener('click', sendMessage);
    chatInput.addEventListener('keypress', e => {
      if (e.key === 'Enter') sendMessage();
    });

  </script>


</body>
</html>
